<div class="flex">
  <div *ngIf="years && years.length > 0" class="col-lg-2 px-0">
    <div class="rounded border-2 border-black">

      <!-- Title -->
      <div class="text-center py-3 title border-2 border-b-black">
        FILTROS
      </div>

      <!-- Years -->
      <div class="py-2 px-3 subtitle border-2 border-b-black">
        Año de publicación
      </div>
      <div class="py-3 px-3 d-flex flex-column gap-3 max-h-100 overflow-scroll">
        <div class="d-flex flex-nowrap gap-3" *ngFor="let year of years">
          <input [id]="year" type="checkbox" (click)="onClickCheckbox($event)">
          <label [for]="year">{{year}}</label>
        </div>
      </div>

    </div>
  </div>
  <div class="container mat-elevation-z8">
    <div *ngIf="isLoadingResults" class="loading-shade">
      <div *ngIf="isLoadingResults">
        <mat-spinner></mat-spinner>
      </div>
    </div>

    <div class="table-container">
      <div *ngIf="articles$ | async as response">
        <table
          mat-table
          [dataSource]="response.data"
          class="example-table"
          matSort
          matSortActive="publication_date"
          matSortDisableClear
          matSortDirection="desc"
        >
          <!-- Title Column -->
          <ng-container matColumnDef="title">
            <th mat-header-cell *matHeaderCellDef>Title</th>
            <td mat-cell *matCellDef="let row">{{ row.title }}</td>
          </ng-container>

          <!-- Author Count Column -->
          <ng-container matColumnDef="author_count">
            <th mat-header-cell *matHeaderCellDef>Authors</th>
            <td mat-cell *matCellDef="let row">{{ row.author_count }}</td>
          </ng-container>

          <!-- Affiliation Count Column -->
          <ng-container matColumnDef="affiliation_count">
            <th mat-header-cell *matHeaderCellDef>Affiliations</th>
            <td mat-cell *matCellDef="let row">{{ row.affiliation_count }}</td>
          </ng-container>

          <!-- Publication Date Column -->
          <ng-container matColumnDef="publication_date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>
              Publication Date
            </th>
            <td mat-cell *matCellDef="let row">
              {{ row.publication_date | date }}
            </td>
          </ng-container>

          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef>Status</th>
            <td mat-cell *matCellDef="let row">No updated</td>
          </ng-container>
          <ng-container matColumnDef="citations">
            <th mat-header-cell *matHeaderCellDef>Citations</th>
            <td mat-cell *matCellDef="let row">{{ row.citations }}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr
            mat-row
            *matRowDef="let row; columns: displayedColumns"
            (click)="clickedRows(row)"
            class="hover:cursor-pointer hover:bg-gray-200"
          ></tr>
        </table>
      </div>
    </div>

    <mat-paginator
      [length]="total"
      [pageSize]="size"
      [pageSizeOptions]="[5, 10, 25, 100]"
      aria-label="Select page"
      class="w-full"
      (page)="onChangePagination($event)"
    >
    </mat-paginator>
  </div>
</div>
