<div class="container mat-elevation-z1 w-full h-full">
  <div *ngIf="isLoading" class="loading-shade">
    <div *ngIf="isLoading">
      <mat-spinner></mat-spinner>
    </div>
  </div>
  <div class="table-container">
    <ng-container *ngIf="authors | async as response">
      <table
        mat-table
        [dataSource]="response.data"
        class="example-table"
        matSort
        matSortActive="publication_date"
        matSortDisableClear
        matSortDirection="desc"
      >
        <!-- Title Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let row">{{ row.name }}</td>
        </ng-container>

        <ng-container matColumnDef="current_affiliation">
          <th mat-header-cell *matHeaderCellDef>Affiliation</th>
          <td mat-cell *matCellDef="let row">{{ row.current_affiliation }}</td>
        </ng-container>

        <ng-container matColumnDef="articles">
          <th mat-header-cell *matHeaderCellDef>Articles</th>
          <td mat-cell *matCellDef="let row">{{ row.articles }}</td>
        </ng-container>

        <ng-container matColumnDef="topics">
          <th mat-header-cell *matHeaderCellDef>Topics</th>
          <td mat-cell *matCellDef="let row">{{ row.topics }}</td>
        </ng-container>

         <ng-container matColumnDef="affiliations">
          <th mat-header-cell *matHeaderCellDef>Affiliations</th>
          <td mat-cell *matCellDef="let row">{{ row.affiliations }}</td>
        </ng-container>

        <ng-container matColumnDef="citation_count">
          <th mat-header-cell *matHeaderCellDef>Citations</th>
          <td mat-cell *matCellDef="let row">{{ row.citation_count }}</td>
        </ng-container>

        <ng-container matColumnDef="updated">
          <th mat-header-cell *matHeaderCellDef>Updated</th>
          <td mat-cell *matCellDef="let row">{{ row.updated }}</td>
        </ng-container>


        <tr mat-header-row *matHeaderRowDef="displayedColumns" ></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns"
          class="hover:cursor-pointer hover:bg-gray-200"
          (click)="goToAuthor(row.scopus_id)"
        ></tr>
      </table>
    </ng-container>
  </div>

  <mat-paginator
    [length]="total"
    [pageSize]="size"
    [pageSizeOptions]="[5, 10, 25, 100]"
    aria-label="Select page"
    class="w-full"
    (page)="onChangePagination($event)"
  >
  </mat-paginator>
  <ng-container *ngIf="!isLoading && total === 0">
    <div class="flex justify-center text-center">
      <mat-icon>sentiment_very_dissatisfied</mat-icon>
      <p class="text-2xl">No results found</p>
    </div>
  </ng-container>
</div>
