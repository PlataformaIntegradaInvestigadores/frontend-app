<!-- Post Files -->
<div class="mt-3" *ngIf="files && files.length > 0">
  <div class="grid gap-2" 
       [ngClass]="{
         'grid-cols-1': files.length === 1,
         'grid-cols-2': files.length > 1
       }">
    <div 
      *ngFor="let file of files"
      class="relative rounded-lg overflow-hidden border border-gray-200">
      
      <!-- Image Files -->
      <div *ngIf="getFileType(file) === 'image'" 
           class="cursor-pointer group relative image-hover" 
           (click)="onImageClick(file)">
        <img 
          [src]="file.file" 
          [alt]="'Imagen del post'"
          class="w-full h-48 object-cover transition-transform duration-300"
          loading="lazy">
        
        <!-- Overlay hover effect -->
        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center">
          <i class="fas fa-expand text-white text-xl opacity-0 group-hover:opacity-100 transition-opacity duration-200"></i>
        </div>
      </div>

      <!-- Video Files -->
      <div *ngIf="getFileType(file) === 'video'">
        <video 
          [src]="file.file" 
          controls 
          class="w-full h-48 object-cover"
          preload="metadata">
          Tu navegador no soporta videos.
        </video>
      </div>

      <!-- Other Files -->
      <div *ngIf="getFileType(file) !== 'image' && getFileType(file) !== 'video'" 
           class="p-4 bg-gray-50 flex items-center justify-between">
        <div class="flex items-center">
          <i [class]="getFileIcon(getFileType(file))" class="text-2xl text-gray-500 mr-3 flex-shrink-0"></i>
          <div class="flex flex-col gap-1">
            <p class="text-sm font-semibold text-gray-900 break-all">{{ file.original_filename || file.file.split('/').pop() }}</p>
            <p class="text-xs text-gray-500">{{ formatFileSize(file.file_size) }}</p>
          </div>
        </div>
        <div class="flex gap-2">
          <button 
            class="p-2 text-gray-500 hover:text-blue-600 hover:bg-gray-100 rounded transition-colors" 
            (click)="onFileOpen(file)" 
            title="Ver">
            <i class="fas fa-eye"></i>
          </button>
          <button 
            class="p-2 text-gray-500 hover:text-green-600 hover:bg-gray-100 rounded transition-colors" 
            (click)="onFileDownload(file)" 
            title="Descargar">
            <i class="fas fa-download"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
