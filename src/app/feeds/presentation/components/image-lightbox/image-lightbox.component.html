<!-- Image Lightbox Modal -->
<div 
  *ngIf="showLightbox" 
  class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90 cursor-pointer lightbox-overlay"
  (click)="onOverlayClick($event)"
  (keydown)="onKeydown($event)"
  tabindex="0">
  
  <!-- Close Button -->
  <button 
    class="absolute top-4 right-4 md:top-5 md:right-5 w-12 h-12 md:w-12 md:h-12 bg-white bg-opacity-10 hover:bg-opacity-20 backdrop-blur-sm rounded-full flex items-center justify-center text-white transition-all duration-300 hover:scale-110 z-10"
    (click)="onClose()"
    aria-label="Cerrar">
    <i class="fas fa-times text-xl"></i>
  </button>

  <!-- Previous Button -->
  <button 
    *ngIf="imageFiles.length > 1"
    class="absolute left-4 md:left-5 top-1/2 transform -translate-y-1/2 w-12 h-12 md:w-12 md:h-12 bg-white bg-opacity-10 hover:bg-opacity-20 backdrop-blur-sm rounded-full flex items-center justify-center text-white transition-all duration-300 hover:scale-110 z-10"
    (click)="onPrevious()"
    aria-label="Imagen anterior">
    <i class="fas fa-chevron-left text-2xl"></i>
  </button>

  <!-- Next Button -->
  <button 
    *ngIf="imageFiles.length > 1"
    class="absolute right-4 md:right-5 top-1/2 transform -translate-y-1/2 w-12 h-12 md:w-12 md:h-12 bg-white bg-opacity-10 hover:bg-opacity-20 backdrop-blur-sm rounded-full flex items-center justify-center text-white transition-all duration-300 hover:scale-110 z-10"
    (click)="onNext()"
    aria-label="Siguiente imagen">
    <i class="fas fa-chevron-right text-2xl"></i>
  </button>

  <!-- Image Container -->
  <div class="relative max-w-[95vw] max-h-[95vh] md:max-w-[90vw] md:max-h-[90vh] p-4 flex items-center justify-center cursor-default">
    <img 
      *ngIf="currentImage"
      [src]="currentImage.file" 
      [alt]="'Imagen del post'"
      class="max-w-full max-h-full object-contain rounded-lg shadow-2xl lightbox-image"
      (click)="$event.stopPropagation()">
  </div>

  <!-- Image Counter -->
  <div 
    *ngIf="imageFiles.length > 1" 
    class="absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-70 backdrop-blur-sm text-white px-4 py-2 rounded-full text-sm font-medium">
    {{ currentImageIndex + 1 }} / {{ imageFiles.length }}
  </div>

  <!-- Image Info -->
  <div 
    *ngIf="currentImage" 
    class="absolute bottom-4 right-4 bg-black bg-opacity-70 backdrop-blur-sm text-white px-3 py-2 rounded-lg text-sm max-w-xs">
    <div class="font-medium truncate">{{ currentImage.original_filename || 'Imagen' }}</div>
    <div *ngIf="currentImage.file_size" class="text-xs opacity-75">{{ formatFileSize(currentImage.file_size) }}</div>
  </div>
</div>
