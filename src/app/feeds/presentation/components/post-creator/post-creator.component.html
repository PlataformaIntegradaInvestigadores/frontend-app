<!-- Post Creator Component - Facebook-like design -->
<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
  <!-- Header section with avatar and textarea -->
  <div class="flex items-start gap-3 mb-4">
    <img [src]="userAvatar" [alt]="userName || 'Tu foto'" class="w-10 h-10 rounded-full object-cover">

    <div class="flex-1">
      <textarea #textArea 
        [(ngModel)]="newPostContent" 
        [placeholder]="placeholder || 'What\'s on your mind?'"
        class="w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-gray-700"
        rows="3" 
        [disabled]="isLoading"
        (focus)="onTextAreaFocus()"
        (blur)="onTextAreaBlur()">
      </textarea>
    </div>
  </div>

  <!-- File upload hidden input -->
  <input type="file" #fileInput (change)="onFileSelected($event)" multiple accept="image/*,video/*" class="hidden">

  <!-- Selected files preview -->
  <div class="mb-4" *ngIf="selectedFiles.length > 0">
    <div class="flex flex-wrap gap-2">
      <div *ngFor="let file of selectedFiles; let i = index"
        class="flex items-center gap-2 bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-sm">
        <i class="fas fa-file"></i>
        <span>{{ file.name }}</span>
        <button type="button" (click)="removeFile(i)" class="text-blue-500 hover:text-blue-700 ml-1">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Bottom section with options and post button -->
  <div class="border-t border-gray-200 pt-3">
    <div class="flex items-center justify-between">
      <!-- Left side options -->
      <div class="flex items-center gap-2" *ngIf="showOptions">
        <button
          class="flex items-center gap-2 px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors text-sm disabled:opacity-50"
          (click)="onOptionClick('photo')" [disabled]="isLoading" title="Agregar foto/video">
          <i class="fas fa-image text-green-500"></i>
          <span class="hidden sm:inline">Photo/Video</span>
        </button>

        <button
          class="flex items-center gap-2 px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors text-sm disabled:opacity-50"
          (click)="onOptionClick('feeling')" [disabled]="isLoading" title="Sentimiento/Actividad">
          <i class="fas fa-smile text-yellow-500"></i>
          <span class="hidden sm:inline">Feeling/Activity</span>
        </button>

        <button
          class="flex items-center gap-2 px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors text-sm disabled:opacity-50"
          (click)="onOptionClick('location')" [disabled]="isLoading" title="UbicaciÃ³n">
          <i class="fas fa-map-marker-alt text-red-500"></i>
          <span class="hidden sm:inline">Check in</span>
        </button>
      </div>

      <!-- Right side post button -->
      <button
        class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2 text-sm"
        (click)="submitPost()" [disabled]="!newPostContent.trim() || isLoading">
        <i class="fas fa-spinner fa-spin" *ngIf="isLoading"></i>
        <span>{{ isLoading ? 'Posting...' : (buttonText || 'Post') }}</span>
      </button>
    </div>
  </div>
</div>