<div class="container mb-4 rounded-xl border p-4 bg-white">
  <div class="flex flex-col sm:flex-row justify-between items-center mb-4 md:text-base lg:text-lg">
    <div class="font-bold text-lg">Consensus Results</div>
    <div class="text-lg font-bold">Active Connections: {{ activeConnections }}</div>
  </div>
  <!-- Information Message -->
  <div *ngIf="!showResults" class="flex flex-col md:flex-row items-center gap-2">
    <svg class="animate-spin-slow h-8 w-8" width="32px" height="32px" viewBox="0 0 24 24" fill="none"
      xmlns="http://www.w3.org/2000/svg">
      <path
        d="M12 3V6M12 18V21M6 12H3M21 12H18M5.63672 5.63672L7.75977 7.75977M16.2422 16.2422L18.3633 18.3633M18.3652 5.63477L16.2441 7.75586M7.75781 16.2422L5.63477 18.3652"
        stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
    <p class="font-semibold text-base">Waiting for other users to complete the workshop...</p>
  </div>

  <div *ngIf="!isDraw">
    <!-- Podium Section -->
    <div class="flex flex-col sm:flex-row justify-center w-full sm:space-x-4" *ngIf="consensusResults.length > 0">
      <!-- Segundo -->
      <div class="bg-gray-100 p-2.5 rounded-lg text-center w-full sm:w-1/4 mb-4 sm:mb-0">
        <!-- Medalla de plata -->
        <svg class="mx-auto" width="45" height="45" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M18.7676 11.51L13.5476 2.93001C13.2076 2.35001 12.5976 2 11.9276 2H5.33762C3.88762 2 2.97762 3.56001 3.68762 4.82001C5.00762 7.15001 6.86762 9.14001 9.11762 10.6C9.87762 11.19 10.8176 11.51 11.7876 11.51H18.7676Z"
            fill="#0074BA" />
          <path
            d="M26.6575 2H20.0675C19.3975 2 18.7875 2.35001 18.4475 2.93001L13.2275 11.51H20.2175C21.1875 11.51 22.1175 11.19 22.8875 10.6C25.1375 9.14001 26.9975 7.16001 28.3175 4.82001C29.0175 3.56001 28.1075 2 26.6575 2Z"
            fill="#00A6ED" />
          <path
            d="M15.9599 30.0012C21.5049 30.0012 25.9999 25.3942 25.9999 19.7112C25.9999 14.0282 21.5049 9.4212 15.9599 9.4212C10.415 9.4212 5.91992 14.0282 5.91992 19.7112C5.91992 25.3942 10.415 30.0012 15.9599 30.0012Z"
            fill="#BEBEBE" />
          <path
            d="M15.9599 28.7611C13.5999 28.7611 11.3799 27.8211 9.71988 26.1111C8.04988 24.4011 7.12988 22.1311 7.12988 19.7111C7.12988 17.2911 8.04988 15.0211 9.71988 13.3111C13.1599 9.78114 18.7599 9.78114 22.2099 13.3111C25.6499 16.8411 25.6499 22.5811 22.2099 26.1111C20.5299 27.8211 18.3099 28.7611 15.9599 28.7611ZM15.9499 11.8911C13.9999 11.8911 12.0399 12.6511 10.5599 14.1811C9.11988 15.6611 8.32988 17.6211 8.32988 19.7111C8.32988 21.8011 9.11988 23.7611 10.5599 25.2411C11.9999 26.7211 13.9199 27.5311 15.9499 27.5311C17.9899 27.5311 19.8999 26.7211 21.3399 25.2411C24.3099 22.1911 24.3099 17.2311 21.3399 14.1811C19.8599 12.6511 17.9099 11.8911 15.9499 11.8911Z"
            fill="#E6E6E6" />
          <path
            d="M17.8376 23.95H13.8676C13.4776 23.95 13.1276 23.73 12.9576 23.37C12.7876 23.02 12.8376 22.6 13.0876 22.3L16.3876 18.25C16.6476 17.93 16.5276 17.59 16.4876 17.49C16.4376 17.37 16.2776 17.1 15.9076 17.09C15.8976 17.09 15.8776 17.09 15.8576 17.09C15.5376 17.09 15.2476 17.24 15.0576 17.5C14.7376 17.95 14.1076 18.06 13.6476 17.74C13.1876 17.42 13.0876 16.79 13.4076 16.33C13.9676 15.54 14.8776 15.07 15.8476 15.07C15.8976 15.07 15.9376 15.07 15.9776 15.07C16.9976 15.12 17.8876 15.73 18.3076 16.66C18.7376 17.62 18.5976 18.71 17.9376 19.52L15.9876 21.92H17.8276C18.3876 21.92 18.8376 22.37 18.8376 22.93C18.8376 23.49 18.3976 23.95 17.8376 23.95Z"
            fill="#636363" />
        </svg>
        <div class="text-base font-semibold mb-2">{{ consensusResults[1].topic_name }}</div>
        <div class="text-sm mb-2"><span class="font-semibold">Score: </span>{{ consensusResults[1].final_value |
          number:'1.2-2' }}</div>
        <div class="text-sm text-gray-600"><span class="font-semibold">Labels: </span>{{
          consensusResults[1].labels.join(', ') }}</div>
      </div>
      <!-- Primero -->
      <div class="bg-gray-100 p-2.5 rounded-lg text-center w-full sm:w-1/4 relative mb-4 sm:mb-0" style="top: -20px;">
        <svg class="mx-auto mb-2" width="45" height="45" viewBox="0 0 32 32" fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M18.7678 11.51L13.5478 2.93001C13.2078 2.35001 12.5978 2 11.9278 2H5.3378C3.8878 2 2.9778 3.56001 3.6878 4.82001C5.0078 7.15001 6.8678 9.14001 9.1178 10.6C9.8778 11.19 10.8178 11.51 11.7878 11.51H18.7678Z"
            fill="#0074BA" />
          <path
            d="M26.6578 2H20.0678C19.3978 2 18.7878 2.35001 18.4478 2.93001L13.2278 11.51H20.2178C21.1878 11.51 22.1178 11.19 22.8878 10.6C25.1378 9.14001 26.9978 7.16001 28.3178 4.82001C29.0178 3.56001 28.1078 2 26.6578 2Z"
            fill="#00A6ED" />
          <path
            d="M15.9901 29.9999C21.535 29.9999 26.0301 25.3929 26.0301 19.7099C26.0301 14.0269 21.535 9.41992 15.9901 9.41992C10.4451 9.41992 5.95007 14.0269 5.95007 19.7099C5.95007 25.3929 10.4451 29.9999 15.9901 29.9999Z"
            fill="#FFB02E" />
          <path
            d="M14.0759 16.041C14.0759 15.4887 14.5236 15.041 15.0759 15.041H16C16.5523 15.041 17 15.4887 17 16.041V23C17 23.5523 16.5523 24 16 24C15.4477 24 15 23.5523 15 23V17.0382C14.4832 16.9994 14.0759 16.5678 14.0759 16.041Z"
            fill="#6D4534" />
          <path
            d="M16 28.7599C13.64 28.7599 11.42 27.8199 9.76004 26.1099C8.09004 24.3999 7.17004 22.1299 7.17004 19.7099C7.17004 17.2899 8.09004 15.0199 9.76004 13.3099C13.2 9.77985 18.8 9.77985 22.25 13.3099C25.69 16.8399 25.69 22.5799 22.25 26.1099C20.57 27.8199 18.35 28.7599 16 28.7599ZM15.99 11.8899C14.04 11.8899 12.08 12.6499 10.6 14.1799C9.16004 15.6599 8.37004 17.6199 8.37004 19.7099C8.37004 21.7999 9.16004 23.7599 10.6 25.2399C12.04 26.7199 13.96 27.5299 15.99 27.5299C18.03 27.5299 19.94 26.7199 21.38 25.2399C24.35 22.1899 24.35 17.2299 21.38 14.1799C19.9 12.6499 17.95 11.8899 15.99 11.8899Z"
            fill="#FCD53F" />
        </svg>
        <div class="text-base font-semibold mb-2">{{ consensusResults[0].topic_name }}</div>
        <div class="text-sm mb-2"><span class="font-semibold">Score: </span>{{ consensusResults[0].final_value |
          number:'1.2-2' }}</div>
        <div class="text-sm text-gray-600"><span class="font-semibold">Labels: </span>{{
          consensusResults[0].labels.join(', ') }}</div>
      </div>
      <!-- Tercero -->
      <div class="bg-gray-100 p-2.5 rounded-lg text-center w-full sm:w-1/4">
        <svg class="mx-auto mb-2" width="45" height="45" viewBox="0 0 32 32" fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M18.7678 11.51L13.5478 2.93001C13.2078 2.35001 12.5978 2 11.9278 2H10.2678H9.8878H5.6878H5.3378C3.8878 2 2.9778 3.56001 3.6878 4.82001C5.0078 7.15001 6.8678 9.14001 9.1178 10.6C9.8778 11.19 10.8178 11.51 11.7878 11.51H18.7678Z"
            fill="#0074BA" />
          <path
            d="M26.6578 2H26.3078H22.1078H21.7278H20.0678C19.3978 2 18.7878 2.35001 18.4478 2.93001L13.2278 11.51H20.2178C21.1878 11.51 22.1178 11.19 22.8878 10.6C25.1378 9.14001 26.9978 7.16001 28.3178 4.82001C29.0178 3.56001 28.1078 2 26.6578 2Z"
            fill="#00A6ED" />
          <path
            d="M15.9901 30C21.535 30 26.0301 25.393 26.0301 19.71C26.0301 14.027 21.535 9.41998 15.9901 9.41998C10.4451 9.41998 5.95007 14.027 5.95007 19.71C5.95007 25.393 10.4451 30 15.9901 30Z"
            fill="#D3883E" />
          <path
            d="M16 28.7599C13.64 28.7599 11.42 27.8199 9.76004 26.1099C8.09004 24.3999 7.17004 22.1299 7.17004 19.7099C7.17004 17.2899 8.09004 15.0199 9.76004 13.3099C13.2 9.77991 18.8 9.77991 22.25 13.3099C25.69 16.8399 25.69 22.5799 22.25 26.1099C20.57 27.8199 18.35 28.7599 16 28.7599ZM15.99 11.8899C14.04 11.8899 12.08 12.6499 10.6 14.1799C9.16004 15.6599 8.37004 17.6199 8.37004 19.7099C8.37004 21.7999 9.16004 23.7599 10.6 25.2399C12.04 26.7199 13.96 27.5299 15.99 27.5299C18.03 27.5299 19.94 26.7199 21.38 25.2399C24.35 22.1899 24.35 17.2299 21.38 14.1799C19.9 12.6499 17.95 11.8899 15.99 11.8899Z"
            fill="#F3AD61" />
          <path
            d="M17.4021 18.2746L18.4496 16.4644C18.6225 16.1593 18.6225 15.7932 18.4496 15.4881C18.2767 15.183 17.9513 15 17.6055 15H14.514C13.975 15 13.5377 15.4373 13.5377 15.9763C13.5377 16.5152 13.975 16.9525 14.514 16.9525H15.9174L15.1648 18.2644C15.0326 18.4271 14.9513 18.6407 14.9513 18.8644C14.9513 19.4034 15.3886 19.8407 15.9276 19.8407C16.5377 19.8407 17.036 20.339 17.036 20.9491C17.036 21.5593 16.5377 22.0576 15.9276 22.0576C15.4598 22.0576 15.0428 21.7627 14.8903 21.3254C14.7072 20.817 14.1581 20.5627 13.6496 20.7356C13.1411 20.9186 12.8767 21.4678 13.0597 21.9763C13.497 23.1865 14.6462 24 15.9276 24C17.6055 24 18.9784 22.6373 18.9784 20.9491C18.9682 19.7898 18.3377 18.7932 17.4021 18.2746Z"
            fill="#402A32" />
        </svg>
        <div class="text-base font-semibold mb-2">{{ consensusResults[2].topic_name }}</div>
        <div class="text-sm mb-2"><span class="font-semibold">Score: </span>{{ consensusResults[2].final_value |
          number:'1.2-2' }}</div>
        <div class="text-sm text-gray-600"><span class="font-semibold">Labels: </span>{{
          consensusResults[2].labels.join(', ') }}</div>
      </div>
    </div>

    <!-- Rest of the Topics -->
    <div class="font-bold text-lg my-3" *ngIf="consensusResults.length > 3">Rest of the Topics Rankings</div>

    <div class="container mx-auto px-4 py-0" *ngIf="consensusResults.length > 3">
      <!-- Header -->
      <div class="hidden sm:flex bg-gray-300 p-2 rounded-t-lg text-black font-bold">
        <div class="w-1/12 text-center">Place</div>
        <div class="w-4/12 text-center">Topic</div>
        <div class="w-1/12 text-center">Score</div>
        <div class="w-8/12 text-center">Labels</div>
      </div>

      <!-- Rows for remaining topics -->
      <div *ngFor="let result of consensusResults.slice(3); let i = index"
        [ngClass]="{'bg-gray-100': i % 2 === 0, 'bg-gray-200': i % 2 !== 0}"
        class="flex flex-col sm:flex-row p-2 border-b border-gray-200 items-center">
        <div class="w-full sm:w-1/12 text-center">{{ i + 4 }}</div>
        <div class="w-full sm:w-4/12 flex items-center space-x-2">{{ result.topic_name }}</div>
        <div class="w-full sm:w-1/12 text-center">{{ result.final_value | number:'1.2-2' }}</div>
        <div class="w-full sm:w-8/12 text-center">{{ result.labels.length > 0 ? result.labels.join(', ') : "There aren't
          labels" }}</div>
      </div>
    </div>
  </div>

  <!-- Draw Results -->
  <div *ngIf="isDraw">
    <div class="font-bold text-lg my-3 text-center">Topics Rankings</div>

    <div class="container mx-auto px-4 py-0">
      <!-- Header -->
      <div class="hidden sm:flex bg-gray-300 p-2 rounded-t-lg text-black font-bold">
        <div class="w-1/12 text-center">Place</div>
        <div class="w-4/12 text-center">Topic</div>
        <div class="w-1/12 text-center">Score</div>
        <div class="w-8/12 text-center">Labels</div>
      </div>

      <!-- Rows for remaining topics -->
      <div *ngFor="let result of consensusResults; let i = index"
        [ngClass]="{'bg-gray-100': i % 2 === 0, 'bg-gray-200': i % 2 !== 0}"
        class="flex flex-col sm:flex-row p-2 border-b border-gray-200 items-center">
        <div class="w-full sm:w-1/12 text-center">{{ i + 1 }}</div>
        <div class="w-full sm:w-4/12 flex items-center space-x-2">{{ result.topic_name }}</div>
        <div class="w-full sm:w-1/12 text-center">{{ result.final_value | number:'1.2-2' }}</div>
        <div class="w-full sm:w-8/12 text-center">{{ result.labels.length > 0 ? result.labels.join(', ') : "There aren't
          labels" }}</div>
      </div>
    </div>
  </div>

  <!-- Estadísticas de Posturas -->
  <div class="my-6">
    <div class="font-bold text-lg my-3">Posture Statistics</div>
    <div class="grid grid-cols-3 gap-4">
      <div class="text-center bg-green-100 p-4 rounded shadow">
        <p class="text-lg font-bold text-green-700">Agree</p>
        <p class="text-2xl font-bold">{{ totalAgree }}</p>
      </div>
      <div class="text-center bg-red-100 p-4 rounded shadow">
        <p class="text-lg font-bold text-red-700">Disagree</p>
        <p class="text-2xl font-bold">{{ totalDisagree }}</p>
      </div>
      <div class="text-center bg-gray-100 p-4 rounded shadow">
        <p class="text-lg font-bold text-gray-700">Neutral</p>
        <p class="text-2xl font-bold">{{ totalNeutral }}</p>
      </div>
    </div>
  </div>
</div>
